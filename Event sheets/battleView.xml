<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>battleView</name>
    <events>
        <include>function</include>
        <variable constant="0" name="stage" sid="6674997048701597" static="0" type="text">1_1</variable>
        <variable constant="0" name="maxFood" sid="6539099087053054" static="0" type="number">0</variable>
        <variable comment="stageGolemDB의 0번째 토큰" constant="0" name="food" sid="4418183236737158" static="0" type="number">0</variable>
        <variable comment="턴마다 1씩 증가" constant="0" name="turnCount" sid="671116988508257" static="0" type="number">1</variable>
        <variable comment="동적 scaling" constant="0" name="scaleLerpRate" sid="5994139726447165" static="0" type="number">0.05</variable>
        <variable constant="0" name="groundCollidesAtY" sid="2534307553501808" static="0" type="number">0</variable>
        <comment>닭 종류. 알이랑 닭 모두 01a/01b/...으로 통일. 골렘도 같다.</comment>
        <comment>전 시트에서 henList에서 토큰 읽고 따로 떼어서, henType은 여기 넣고 upgrade 상태도 여기 넣은 후 henButton에 넣기</comment>
        <variable constant="0" name="henSelected" sid="2194517620432025" static="0" type="text"></variable>
        <variable constant="0" name="henType0" sid="3058770452431309" static="0" type="text">01a</variable>
        <variable constant="0" name="henType1" sid="6576623055176688" static="0" type="text">02a</variable>
        <variable constant="0" name="henType2" sid="3613873163314068" static="0" type="text">01c</variable>
        <variable constant="0" name="henType3" sid="3162110144748247" static="0" type="text">01d</variable>
        <variable constant="0" name="henUpgrade0" sid="3153748798202789" static="0" type="number">0</variable>
        <variable constant="0" name="henUpgrade1" sid="6114964348667643" static="0" type="number">0</variable>
        <variable constant="0" name="henUpgrade2" sid="2651005052182668" static="0" type="number">0</variable>
        <variable constant="0" name="henUpgrade3" sid="2460099743260373" static="0" type="number">0</variable>
        <comment>버튼 위치</comment>
        <variable constant="0" name="henButtonY" sid="4408282120752925" static="0" type="number">0</variable>
        <variable constant="0" name="henButtonXOri" sid="9840665507466737" static="0" type="number">0</variable>
        <variable constant="0" name="henButtonX0" sid="152584223238758" static="0" type="number">0</variable>
        <variable constant="0" name="henButtonX1" sid="8377483212427012" static="0" type="number">0</variable>
        <variable constant="0" name="henButtonX2" sid="1331802205914653" static="0" type="number">0</variable>
        <variable constant="0" name="henButtonX3" sid="6604138417354602" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineY0" sid="6360940031656765" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineY1" sid="8839274230292345" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineY2" sid="1404849808136844" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineY3" sid="1490443444685032" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX0" sid="2973102611460368" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX1" sid="7276023616536072" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX2" sid="6069077270344478" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX3" sid="2766113627612955" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX4" sid="8221315634756265" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX5" sid="7890022787539418" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX6" sid="5597938602092218" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX7" sid="6841633732097927" static="0" type="number">0</variable>
        <variable constant="0" name="launchLineX8" sid="2113129269063617" static="0" type="number">0</variable>
        <comment>gameState&#x0D;&#x0A;0: not Ready(stage starting point)&#x0D;&#x0A;1: waiting for shoot&#x0D;&#x0A;2: shooting ani &amp;calc&#x0D;&#x0A;3: check finish, move golem&#x0D;&#x0A;4: lost&#x0D;&#x0A;5: win</comment>
        <variable constant="0" name="gameState" sid="8756455970267743" static="0" type="number">0</variable>
        <comment>골렘 애니메이션 변수. 닭은 다 나뉘어져 있어서 할 필요 X.</comment>
        <variable constant="0" name="golemIdleFrameStart" sid="6648952167722388" static="0" type="number">0</variable>
        <variable constant="0" name="golemIdleFrameEnd" sid="5451193856181061" static="0" type="number">0</variable>
        <variable constant="0" name="golemMovingFrameStart" sid="1026416991810081" static="0" type="number">1</variable>
        <variable constant="0" name="golemMovingFrameEnd" sid="6504824674708408" static="0" type="number">1</variable>
        <comment>stage : 전 단계에서 정해서 오기. eggCollideGround는 몸풀기용, explode 화면 밑에 뒀다가 .</comment>
        <event-block sid="1239435629214137">
            <conditions>
                <condition id="-2" name="On start of layout" sid="4382354078170552" type="System" />
            </conditions>
            <actions>
                <action id="-3" name="Create object" sid="7903410175042246" type="System">
                    <param id="0" name="Object to create">skyLeftCover</param>
                    <param id="1" name="Layer">&quot;hud&quot;</param>
                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                </action>
                <action id="-3" name="Create object" sid="658916617299127" type="System">
                    <param id="0" name="Object to create">skyRightCover</param>
                    <param id="1" name="Layer">&quot;hud&quot;</param>
                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                </action>
                <action id="0" name="Call function" sid="8111986708484133" type="Function">
                    <param id="0" name="Name">&quot;SetGroupActive&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;battleView&quot;</param>
                </action>
                <action id="-9" name="Set value" sid="1069885727262216" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-16" name="Wait" sid="2592755419902297" type="System">
                    <param id="0" name="Seconds">0</param>
                </action>
                <action behavior="MoveTo" id="8" name="Move to distance-angle" sid="597322634753425" type="skyLeftCover">
                    <param id="0" name="Distance">self.Width</param>
                    <param id="1" name="Angle">180</param>
                </action>
                <action behavior="MoveTo" id="8" name="Move to distance-angle" sid="3216778921422777" type="skyRightCover">
                    <param id="0" name="Distance">self.Width</param>
                    <param id="1" name="Angle">0</param>
                </action>
                <action id="-9" name="Set value" sid="7165514771837842" type="System">
                    <param id="0" name="Variable">turnCount</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="-16" name="Wait" sid="5573325639662632" type="System">
                    <param id="0" name="Seconds">0</param>
                </action>
                <action id="-9" name="Set value" sid="4202967625011962" type="System">
                    <param id="0" name="Variable">maxFood</param>
                    <param id="1" name="Value">int(tokenat(stageGolemDB.Get(stage),0,&quot;/&quot;))</param>
                </action>
                <action id="-9" name="Set value" sid="8882282002653057" type="System">
                    <param id="0" name="Variable">food</param>
                    <param id="1" name="Value">maxFood</param>
                </action>
                <action id="0" name="Call function" sid="9451380431179312" type="Function">
                    <param id="0" name="Name">&quot;battleViewButtonPosSet&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="0" name="Set text" sid="2450286346750983" type="stageText">
                    <param id="0" name="Text">&quot;스테이지 &quot;&amp;tokenat(stage,0,&quot;_&quot;)&amp;&quot;-&quot;&amp;tokenat(stage,1,&quot;_&quot;)</param>
                </action>
                <action id="0" name="Call function" sid="9197399550947807" type="Function">
                    <param id="0" name="Name">&quot;bgSet&quot;</param>
                    <param id="1" name="Parameter {n}">tokenat(stage,0,&quot;_&quot;){###}tokenat(stage,1,&quot;_&quot;)</param>
                </action>
                <action id="-16" name="Wait" sid="716086507349619" type="System">
                    <param id="0" name="Seconds">0</param>
                </action>
                <action id="0" name="Call function" sid="6950405149362282" type="Function">
                    <param id="0" name="Name">&quot;battleViewButtonInit&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="0" name="Call function" sid="1111408033717128" type="Function">
                    <param id="0" name="Name">&quot;refreshFood&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="-3" name="Create object" sid="7557852152154248" type="System">
                    <param id="0" name="Object to create">battleViewTimer</param>
                    <param id="1" name="Layer">&quot;hud&quot;</param>
                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                    <param id="3" name="Y">(ViewportLeft(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                </action>
                <action id="-24" name="Move to top" sid="6452252867064236" type="skyLeftCover" />
                <action id="-24" name="Move to top" sid="752473950550115" type="skyRightCover" />
                <action id="2" name="Stop" sid="8197932946038776" type="battleViewTimer" />
                <action id="6" name="Stop" sid="7268624510931513" type="Audio">
                    <param id="0" name="Tag">&quot;bgm&quot;</param>
                </action>
                <action id="0" name="Play" sid="8121238337652505" type="Audio">
                    <param id="0" name="Audio file">battleView</param>
                    <param id="2" name="Loop">1</param>
                    <param id="3" name="Volume">float(WebStorage.LocalValue(&quot;music&quot;))</param>
                    <param id="1" name="Tag (optional)">&quot;bgm&quot;</param>
                </action>
                <action id="-13" name="Set time scale" sid="4075256169237309" type="System">
                    <param id="0" name="Time scale">1</param>
                </action>
                <action id="0" name="Call function" sid="8310347602503095" type="Function">
                    <param id="0" name="Name">&quot;eggCollidesGround&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="-3" name="Create object" sid="7301252629669957" type="System">
                    <param id="0" name="Object to create">explode</param>
                    <param id="1" name="Layer">&quot;effect&quot;</param>
                    <param id="2" name="X">640</param>
                    <param id="3" name="Y">1200</param>
                </action>
                <action id="-16" name="Wait" sid="3529066822744097" type="System">
                    <param id="0" name="Seconds">1.0</param>
                </action>
                <action id="-9" name="Destroy" sid="4307882768605751" type="explode" />
            </actions>
        </event-block>
        <event-block any="1" sid="6413064589434787">
            <conditions>
                <condition behavior="MoveTo" id="0" name="On hit target position" sid="7003493645694591" type="skyLeftCover" />
                <condition behavior="MoveTo" id="0" name="On hit target position" sid="4967314145329939" type="skyRightCover" />
            </conditions>
            <actions>
                <action id="-9" name="Destroy" sid="7365907661830559" type="skyLeftCover" />
                <action id="-9" name="Destroy" sid="8583099189811968" type="skyRightCover" />
                <action id="3" name="Start" sid="8118834679325163" type="battleViewTimer">
                    <param id="0" name="From">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="7226440847034576">
            <conditions>
                <condition id="3" name="On touched object" sid="2700846813471433" type="Touch">
                    <param id="0" name="Object">exitButton</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="9547377507028987" type="Function">
                    <param id="0" name="Name">&quot;loseHeart&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="-2" name="Go to layout" sid="4124365629596598" type="System">
                    <param id="0" name="Layout">stageView</param>
                </action>
            </actions>
        </event-block>
        <comment>게임 종료시는 다 1이고, 게임 진행시에만 1.5 선택가능.</comment>
        <event-block sid="2496403703335713">
            <conditions>
                <condition id="3" name="On touched object" sid="2219427642184897" type="Touch">
                    <param id="0" name="Object">timeScaleButton</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="6363582317296506" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Value">3</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="7803887134647026">
                    <conditions>
                        <condition id="2" name="Is playing" sid="9763550669102114" type="timeScaleButton">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="8476487635573502" type="timeScaleButton">
                            <param id="0" name="Animation">&quot;Fast&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action id="-13" name="Set time scale" sid="3152582382913172" type="System">
                            <param id="0" name="Time scale">1.5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8970397135991959">
                    <conditions>
                        <condition id="-22" name="Else" sid="7580472020461184" type="System" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="3151881277964346" type="timeScaleButton">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action id="-13" name="Set time scale" sid="9867168939425781" type="System">
                            <param id="0" name="Time scale">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="4163058616545128">
            <conditions>
                <condition id="-14" name="Compare variable" sid="8212883603671455" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="2072641300965937">
                    <conditions>
                        <condition id="4" name="On finished" sid="2926728926176212" type="battleViewTimer">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="750231418469426" type="battleViewTimer" />
                        <action id="-9" name="Set value" sid="4526369778345731" type="System">
                            <param id="0" name="Variable">gameState</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>state1에 턴스킵 독데미지 / 4번골렘 힐</comment>
        <event-block sid="7831613190100401">
            <conditions>
                <condition id="-14" name="Compare variable" sid="2022369605765399" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">1</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <comment>골렘생성 및 turn 표시</comment>
                <variable constant="0" name="flag" sid="4480113149660183" static="1" type="number">0</variable>
                <event-block sid="9829324267031685">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="5510155040585902" type="System" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="3087253535405028">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="8224531886540647" type="System">
                                    <param id="0" name="Variable">flag</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="0" name="Call function" sid="9799396295469672" type="Function">
                                    <param id="0" name="Name">&quot;golemCreate&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="0" name="Call function" sid="7656463704468952" type="Function">
                                    <param id="0" name="Name">&quot;golemZOrder&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="-9" name="Destroy" sid="2595796012120358" type="turnText" />
                                <action id="-3" name="Create object" sid="2204532806106861" type="System">
                                    <param id="0" name="Object to create">turnText</param>
                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                                </action>
                                <action id="0" name="Set text" sid="4450026276879766" type="turnText">
                                    <param id="0" name="Text">&quot;제 &quot;&amp;turnCount&amp;&quot; 턴&quot;</param>
                                </action>
                                <action id="-16" name="Wait" sid="6895879010959442" type="System">
                                    <param id="0" name="Seconds">0.5</param>
                                </action>
                                <action id="-9" name="Set value" sid="2983111357784312" type="System">
                                    <param id="0" name="Variable">flag</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>매턴 food 충전</comment>
                        <event-block sid="9625744061729154">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="4788763696935851" type="System">
                                    <param id="0" name="First value">maxFood</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">food</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Add to" sid="9280984054365308" type="System">
                                    <param id="0" name="Variable">food</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="0" name="Call function" sid="8554368118499941" type="Function">
                                    <param id="0" name="Name">&quot;refreshFood&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9956803510707261">
                            <conditions>
                                <condition id="-11" name="For Each" sid="4047328395083791" type="System">
                                    <param id="0" name="Object">golem</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>4번골렘 자힐</comment>
                                <event-block sid="169725014226393">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="4852722080720507" type="golem">
                                            <param id="0" name="Instance variable">kind</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;04&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="4190249499174653" type="Function">
                                            <param id="0" name="Name">&quot;dealingDamage&quot;</param>
                                            <param id="1" name="Parameter {n}">golem.UID{###}-1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="5574941802979449" type="Function">
                                            <param id="0" name="Name">&quot;golemHealEffect&quot;</param>
                                            <param id="1" name="Parameter {n}">golem.UID</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>12번골렘 광역힐</comment>
                                <variable constant="0" name="12golemY" sid="3917888895237459" static="0" type="number">0</variable>
                                <event-block sid="2235599605071474">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="6508538750114628" type="golem">
                                            <param id="0" name="Instance variable">kind</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;12&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="7314152885027912" type="System">
                                            <param id="0" name="Variable">12golemY</param>
                                            <param id="1" name="Value">golem.posY</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="4295980576194345">
                                            <conditions>
                                                <condition id="-19" name="Pick all" sid="4551046578656715" type="System">
                                                    <param id="0" name="Object">golem</param>
                                                </condition>
                                                <condition id="-11" name="For Each" sid="5614467421502144" type="System">
                                                    <param id="0" name="Object">golem</param>
                                                </condition>
                                                <condition id="-7" name="Compare instance variable" sid="9061922946480778" type="golem">
                                                    <param id="0" name="Instance variable">posY</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">12golemY</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Call function" sid="7063485332682364" type="Function">
                                                    <param id="0" name="Name">&quot;dealingDamage&quot;</param>
                                                    <param id="1" name="Parameter {n}">golem.UID{###}-1</param>
                                                </action>
                                                <action id="0" name="Call function" sid="1246293631379766" type="Function">
                                                    <param id="0" name="Name">&quot;golemHealEffect&quot;</param>
                                                    <param id="1" name="Parameter {n}">golem.UID</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>턴스킵. 독은 적용하고 가자.</comment>
                <event-block sid="608112150923351">
                    <conditions>
                        <condition id="3" name="On touched object" sid="4222458757991138" type="Touch">
                            <param id="0" name="Object">turnButton</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="6894589747538096" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="1298213872717341">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="7435559858565224" type="Function">
                                    <param id="0" name="Name">&quot;poisonDealsDamage&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="-16" name="Wait" sid="724939789541473" type="System">
                                    <param id="0" name="Seconds">0</param>
                                </action>
                                <action id="-9" name="Destroy" sid="2738618790041049" type="turnText" />
                                <action id="-3" name="Create object" sid="6647081970919151" type="System">
                                    <param id="0" name="Object to create">turnText</param>
                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                                </action>
                                <action id="0" name="Set text" sid="5800091701740118" type="turnText">
                                    <param id="0" name="Text">&quot;턴 넘기기&quot;</param>
                                </action>
                                <action id="0" name="Play" sid="6577916948711246" type="Audio">
                                    <param id="0" name="Audio file">turnOverTicktick</param>
                                    <param id="2" name="Loop">0</param>
                                    <param id="3" name="Volume">float(WebStorage.LocalValue(&quot;sfx&quot;))</param>
                                    <param id="1" name="Tag (optional)">&quot;&quot;</param>
                                </action>
                                <action id="-9" name="Set value" sid="359202178077101" type="System">
                                    <param id="0" name="Variable">gameState</param>
                                    <param id="1" name="Value">3</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="6672481645850253">
                    <conditions>
                        <condition id="3" name="On touched object" sid="2240256857128339" type="Touch">
                            <param id="0" name="Object">launchLine</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="8407475261259978" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9758878962771427" type="Function">
                            <param id="0" name="Name">&quot;touchLaunchLine&quot;</param>
                            <param id="1" name="Parameter {n}">launchLine.UID</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7196352529718023">
                    <conditions>
                        <condition id="3" name="On touched object" sid="3528724701036763" type="Touch">
                            <param id="0" name="Object">henButton</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="687019266778905" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="4018553326262423" type="Function">
                            <param id="0" name="Name">&quot;touchHenButton&quot;</param>
                            <param id="1" name="Parameter {n}">henButton.UID</param>
                        </action>
                    </actions>
                </event-block>
                <comment>state 2에서 망가진 초점과 스케일 원상복귀!</comment>
                <event-block sid="4433696522056398">
                    <conditions />
                    <actions>
                        <action id="0" name="Call function" sid="7110224542697411" type="Function">
                            <param id="0" name="Name">&quot;battleViewLayerScrollBack&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>state2에 알 던질 때 독 데미지. 타워닭 타워.</comment>
        <event-block sid="423270365469461">
            <conditions>
                <condition id="-14" name="Compare variable" sid="1404712016642609" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">2</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <comment>알 던질때 독 데미지</comment>
                <event-block sid="599502389408539">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="5728120520909082" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="4480629187107018" type="Function">
                            <param id="0" name="Name">&quot;poisonDealsDamage&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <comment>touchLanchLine-&gt; lanchEgg-&gt; launchEggFromCannon에서 wait:rotateComplete 시그널 통과.&#x0D;&#x0A;알 충돌해서 파괴되고 데미지 계산 종료시 state3으로</comment>
                <variable constant="0" name="flag" sid="5215577672228696" static="0" type="number">0</variable>
                <event-block sid="6140712249679346">
                    <conditions>
                        <condition behavior="RotateTo" id="0" name="On hit target angle" sid="1253585371808687" type="cannon" />
                        <condition id="-14" name="Compare variable" sid="2067942526447437" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="2366788065821316" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-42" name="Signal" sid="9022264806122902" type="System">
                            <param id="0" name="Tag">&quot;rotateComplete&quot;</param>
                        </action>
                        <action id="-16" name="Wait" sid="8515417054816278" type="System">
                            <param id="0" name="Seconds">0</param>
                        </action>
                        <action id="-41" name="Wait for signal" sid="8727137720552172" type="System">
                            <param id="0" name="Tag">&quot;eggDestroyed&quot;</param>
                        </action>
                        <action id="-41" name="Wait for signal" sid="5118369634265691" type="System">
                            <param id="0" name="Tag">&quot;explodeFinished&quot;</param>
                        </action>
                        <action id="-9" name="Set value" sid="4394803064830476" type="System">
                            <param id="0" name="Variable">gameState</param>
                            <param id="1" name="Value">3</param>
                        </action>
                    </actions>
                </event-block>
                <comment> launchEggFromCannon 에서 wait:cannonMoved시그널.</comment>
                <event-block sid="9321738984096278">
                    <conditions>
                        <condition behavior="MoveTo" id="0" name="On hit target position" sid="5422583559325003" type="cannon" />
                    </conditions>
                    <actions>
                        <action id="-42" name="Signal" sid="5654119739274671" type="System">
                            <param id="0" name="Tag">&quot;cannonMoved&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>폭파장면 끝나면 턴스킵. 이때 타워닭 타워세우기 확인!</comment>
                <event-block sid="7939978331846722">
                    <conditions>
                        <condition id="5" name="On any finished" sid="7831210850090395" type="explode" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="7323345668130972">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="7889189680304813" type="explode">
                                    <param id="0" name="Instance variable">kind</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;10&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="6021124234890945" type="launchLine">
                                    <param id="0" name="Instance variable">launchLineIDX</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">explode.posX</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="1760023573878012" type="launchLine">
                                    <param id="0" name="Instance variable">launchLineIDY</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">explode.posY</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="7393192601943754" type="launchLine">
                                    <param id="0" name="Instance variable">occupied</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Spawn another object" sid="4368556382746054" type="launchLine">
                                    <param id="0" name="Object">blockTower</param>
                                    <param id="1" name="Layer">&quot;golem&quot;</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="6894677027864835" type="launchLine">
                                    <param id="0" name="Instance variable">occupied</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="4273300747818255" type="blockTower">
                                    <param id="0" name="Instance variable">posX</param>
                                    <param id="1" name="Value">explode.posX</param>
                                </action>
                                <action id="-10" name="Set value" sid="9815260393893532" type="blockTower">
                                    <param id="0" name="Instance variable">posY</param>
                                    <param id="1" name="Value">explode.posY</param>
                                </action>
                                <action id="-10" name="Set value" sid="3893760492248655" type="blockTower">
                                    <param id="0" name="Instance variable">turnLeft</param>
                                    <param id="1" name="Value">floor((9-explode.posX)/2)+1</param>
                                </action>
                                <action id="0" name="Play" sid="6754308888217413" type="Audio">
                                    <param id="0" name="Audio file">10tower</param>
                                    <param id="2" name="Loop">0</param>
                                    <param id="3" name="Volume">float(WebStorage.LocalValue(&quot;sfx&quot;))</param>
                                    <param id="1" name="Tag (optional)">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="2337419338875027">
                            <conditions />
                            <actions>
                                <action id="-9" name="Destroy" sid="9149696161055229" type="explode" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="3898576716259156">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="1820616239500845" type="System">
                            <param id="0" name="First value">explode.Count</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-42" name="Signal" sid="377208586487665" type="System">
                            <param id="0" name="Tag">&quot;explodeFinished&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <variable constant="0" name="scaleRateByEgg" sid="3266546075561834" static="1" type="number">1</variable>
                <comment>알이 날아가는 동안 동적 scaling, 충돌시 kind에 따라서 다른 기작.</comment>
                <event-block sid="5197510167084536">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="1630375533568909" type="System">
                            <param id="0" name="First value">eggBullet.Count</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Second value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-2" name="Set Y" sid="2173170722995933" type="focus">
                            <param id="0" name="Y">(eggBullet.Y*2+(ViewportBottom(&quot;hud&quot;)+ViewportTop(&quot;hud&quot;))/2)/3</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="4785510976647374">
                            <conditions>
                                <condition id="-4" name="Trigger once while true" sid="8087084769422266" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="5048259245881471" type="System">
                                    <param id="0" name="Variable">groundCollidesAtY</param>
                                    <param id="1" name="Value">Function.Call(&quot;launchLineYSet&quot;,eggBullet.targetY)</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>알이 화면 밖을 벗어나면 텔레포트</comment>
                        <variable constant="0" name="eggLerpRate" sid="3371866763539894" static="0" type="number">0.25</variable>
                        <event-block sid="5533874764932308">
                            <conditions>
                                <condition id="-4" name="Is outside layout" sid="3872263448130862" type="eggBullet" />
                                <condition id="-4" name="Trigger once while true" sid="6468475499288316" type="System" />
                            </conditions>
                            <actions>
                                <action id="-16" name="Wait" sid="5719331381967009" type="System">
                                    <param id="0" name="Seconds">1.6</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="5808889986337037">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="5718256690745031" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="1979301122183301" type="eggBullet">
                                            <param id="0" name="X">launchLineX0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="9816749336822286">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="9859736103854652" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="5249316841037475" type="eggBullet">
                                            <param id="0" name="X">launchLineX1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="168682644472299">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="9930415177814466" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">2</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="7745007071718591" type="eggBullet">
                                            <param id="0" name="X">launchLineX2</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="1006628585725343">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="4456891655657364" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">3</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="575420939305861" type="eggBullet">
                                            <param id="0" name="X">launchLineX3</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="3601919152590035">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="5649751375290809" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">4</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="8760705833460812" type="eggBullet">
                                            <param id="0" name="X">launchLineX4</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="1830702028611684">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="2191154355872837" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">5</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="3116540757866145" type="eggBullet">
                                            <param id="0" name="X">launchLineX5</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="5076384684692069">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="7668095334572873" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">6</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="5495612317195569" type="eggBullet">
                                            <param id="0" name="X">launchLineX6</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="1324282135308021">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="4637556946532868" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">7</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="2717126209001828" type="eggBullet">
                                            <param id="0" name="X">launchLineX7</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="5999773768132082">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="5119389048858922" type="eggBullet">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">8</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="911676858294672" type="eggBullet">
                                            <param id="0" name="X">launchLineX8</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="9356031495747486">
                                    <conditions />
                                    <actions>
                                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="9535435793827718" type="eggBullet">
                                            <param id="0" name="Angle">90</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>땅에서 깨지는 알과 골렘맞고 깨지는 알</comment>
                        <event-block sid="7785512976718197">
                            <conditions>
                                <condition id="-2" name="Compare Y" sid="365556949268466" type="eggBullet">
                                    <param id="0" name="Comparison">4</param>
                                    <param id="1" name="Y co-ordinate">groundCollidesAtY</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="6853228119888008" type="Function">
                                    <param id="0" name="Name">&quot;eggCollidesGround&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>알 깨지고 나면 원래대로</comment>
                <event-block sid="9288597990711929">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="9139931054793749" type="System">
                            <param id="0" name="First value">eggBullet.Count</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-2" name="Set Y" sid="2741998652923665" type="focus">
                            <param id="0" name="Y">lerp(self.Y,(ViewportBottom(&quot;hud&quot;)+ViewportTop(&quot;hud&quot;))/2,scaleLerpRate)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>state3 은 끝난거 아니면 그냥 턴카운트+1, aim해제하고 eating상태 turn+1, 골렘이동.</comment>
        <event-block sid="7468797667848883">
            <conditions>
                <condition id="-14" name="Compare variable" sid="1740880111558583" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">3</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Set Y" sid="8738901212169215" type="focus">
                    <param id="0" name="Y">lerp(self.Y,(ViewportBottom(&quot;hud&quot;)+ViewportTop(&quot;hud&quot;))/2,scaleLerpRate)</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="2445677912319106">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="7282539025204121" type="System" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <comment>더이상 나올 골렘 없고 다 잡았으면 클리어!</comment>
                        <event-block sid="6826032319698904">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="4560034501440145" type="System">
                                    <param id="0" name="First value">turnCount</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Second value">tokencount(stageGolemDB.Get(stage),&quot;/&quot;)-2</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="1799239955162429" type="System">
                                    <param id="0" name="First value">golem.Count</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-16" name="Wait" sid="8242015803321082" type="System">
                                    <param id="0" name="Seconds">1.0</param>
                                </action>
                                <action id="-9" name="Set value" sid="9822399156444038" type="System">
                                    <param id="0" name="Variable">gameState</param>
                                    <param id="1" name="Value">5</param>
                                </action>
                                <action id="6" name="Stop" sid="9523170741905331" type="Audio">
                                    <param id="0" name="Tag">&quot;bgm&quot;</param>
                                </action>
                                <action id="-13" name="Set time scale" sid="9424603207288781" type="System">
                                    <param id="0" name="Time scale">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <variable constant="0" name="nextChapter" sid="1817001389787919" static="0" type="number">0</variable>
                                <variable constant="0" name="nextStage" sid="3722009336789411" static="0" type="number">0</variable>
                                <variable constant="0" name="thisChapter" sid="9611929320096571" static="0" type="number">0</variable>
                                <variable constant="0" name="thisStage" sid="3339232305024283" static="0" type="number">0</variable>
                                <variable constant="0" name="maxChapter" sid="3321296208240181" static="0" type="number">0</variable>
                                <variable constant="0" name="maxStage" sid="5628943979238902" static="0" type="number">0</variable>
                                <event-block sid="9137769004596908">
                                    <conditions />
                                    <actions>
                                        <action id="-9" name="Set value" sid="303051579282892" type="System">
                                            <param id="0" name="Variable">thisChapter</param>
                                            <param id="1" name="Value">int(left(stage,1))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="9234725471549942" type="System">
                                            <param id="0" name="Variable">thisStage</param>
                                            <param id="1" name="Value">int(right(stage,1))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="6779576294423834" type="System">
                                            <param id="0" name="Variable">maxChapter</param>
                                            <param id="1" name="Value">int(left(WebStorage.LocalValue(&quot;maxStage&quot;),1))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="2840892420033073" type="System">
                                            <param id="0" name="Variable">maxStage</param>
                                            <param id="1" name="Value">int(right(WebStorage.LocalValue(&quot;maxStage&quot;),1))</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="9023643163066666">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="1708827913086048" type="System">
                                                    <param id="0" name="First value">thisStage</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">10</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="7689072433443618" type="System">
                                                    <param id="0" name="Variable">nextChapter</param>
                                                    <param id="1" name="Value">thisChapter+1</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="7646953715724514" type="System">
                                                    <param id="0" name="Variable">nextStage</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="5642908524473899">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="1194412239576137" type="System">
                                                    <param id="0" name="First value">thisStage</param>
                                                    <param id="1" name="Comparison">2</param>
                                                    <param id="2" name="Second value">10</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="7696893791446345" type="System">
                                                    <param id="0" name="Variable">nextChapter</param>
                                                    <param id="1" name="Value">thisChapter</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="7786459656345643" type="System">
                                                    <param id="0" name="Variable">nextStage</param>
                                                    <param id="1" name="Value">thisStage+1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>지금 스테이지가 maxStage면 maxStage+1</comment>
                                        <event-block sid="7002172697979385">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="7722846940997811" type="System">
                                                    <param id="0" name="First value">thisChapter*10+thisStage</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">maxChapter*10+maxStage</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Set local value" sid="3957457925788503" type="WebStorage">
                                                    <param id="0" name="Key">&quot;maxStage&quot;</param>
                                                    <param id="1" name="Value">nextChapter&amp;&quot;_&quot;&amp;nextStage</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="8026615998906882">
                                            <conditions />
                                            <actions>
                                                <action id="-9" name="Destroy" sid="3377846873518647" type="turnText" />
                                                <action id="-3" name="Create object" sid="2592883838880948" type="System">
                                                    <param id="0" name="Object to create">turnText</param>
                                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                                                </action>
                                                <action behavior="Fade" id="3" name="Set wait time" sid="3653569819368586" type="turnText">
                                                    <param id="0" name="Wait time">3</param>
                                                </action>
                                                <action id="0" name="Set text" sid="2541924343708251" type="turnText">
                                                    <param id="0" name="Text">&quot;스테이지 클리어!&quot;</param>
                                                </action>
                                                <action id="0" name="Play" sid="7604559368032906" type="Audio">
                                                    <param id="0" name="Audio file">battleWin</param>
                                                    <param id="2" name="Loop">0</param>
                                                    <param id="3" name="Volume">float(WebStorage.LocalValue(&quot;sfx&quot;))</param>
                                                    <param id="1" name="Tag (optional)">&quot;&quot;</param>
                                                </action>
                                            </actions>
                                            <sub-events>
                                                <comment>스테이지 보상이 있다면</comment>
                                                <event-block sid="1692402922163884">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="2269552735853079" type="System">
                                                            <param id="0" name="First value">tokenat(stageDB.Get(stage),2,&quot;/&quot;)</param>
                                                            <param id="1" name="Comparison">1</param>
                                                            <param id="2" name="Second value">&quot;&quot;</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <comment>닭장에 자리가 있다면 보상보여주면서 추가</comment>
                                                        <variable constant="0" name="stageReward" sid="9598216309188835" static="0" type="text"></variable>
                                                        <event-block sid="1547310491842674">
                                                            <conditions>
                                                                <condition id="-8" name="Compare two values" sid="2570974717236386" type="System">
                                                                    <param id="0" name="First value">tokencount(WebStorage.LocalValue(&quot;henList&quot;),&quot;/&quot;)-1</param>
                                                                    <param id="1" name="Comparison">2</param>
                                                                    <param id="2" name="Second value">maxCage</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-9" name="Set value" sid="6598653337350633" type="System">
                                                                    <param id="0" name="Variable">stageReward</param>
                                                                    <param id="1" name="Value">tokenat(stageDB.Get(stage),2,&quot;/&quot;)</param>
                                                                </action>
                                                                <action id="0" name="Set local value" sid="2149015783617675" type="WebStorage">
                                                                    <param id="0" name="Key">&quot;henList&quot;</param>
                                                                    <param id="1" name="Value">WebStorage.LocalValue(&quot;henList&quot;)&amp;stageReward&amp;&quot;/&quot;</param>
                                                                </action>
                                                                <action id="-16" name="Wait" sid="7150693334002959" type="System">
                                                                    <param id="0" name="Seconds">1</param>
                                                                </action>
                                                                <action id="-3" name="Create object" sid="433712429284821" type="System">
                                                                    <param id="0" name="Object to create">turnText</param>
                                                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                                                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2+50</param>
                                                                </action>
                                                                <action id="3" name="Set font size" sid="5483329939825059" type="turnText">
                                                                    <param id="0" name="Size (pt)">25</param>
                                                                </action>
                                                                <action id="0" name="Set text" sid="3623720103774699" type="turnText">
                                                                    <param id="0" name="Text">&quot;스테이지 보상 획득!&quot;</param>
                                                                </action>
                                                                <action id="-3" name="Create object" sid="916369742832303" type="System">
                                                                    <param id="0" name="Object to create">henCage</param>
                                                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2-100</param>
                                                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2+100</param>
                                                                </action>
                                                                <action id="-10" name="Set value" sid="8341282273374198" type="henCage">
                                                                    <param id="0" name="Instance variable">kind</param>
                                                                    <param id="1" name="Value">left(stageReward,2)</param>
                                                                </action>
                                                                <action id="-10" name="Set value" sid="5130743058382058" type="henCage">
                                                                    <param id="0" name="Instance variable">type</param>
                                                                    <param id="1" name="Value">mid(stageReward,2,1)</param>
                                                                </action>
                                                                <action id="0" name="Set text" sid="3027582875508677" type="powerupHUD">
                                                                    <param id="0" name="Text">right(stageReward,2)</param>
                                                                </action>
                                                                <action id="-3" name="Set position" sid="7912593807350846" type="powerupHUD">
                                                                    <param id="0" name="X">henCage.X+powerupIndicatorX</param>
                                                                    <param id="1" name="Y">henCage.Y+powerupIndicatorY</param>
                                                                </action>
                                                                <action id="0" name="Call function" sid="3719015735961856" type="Function">
                                                                    <param id="0" name="Name">&quot;typeIconPick&quot;</param>
                                                                    <param id="1" name="Parameter {n}">henCage.UID</param>
                                                                </action>
                                                                <action behavior="Sine" id="0" name="Set active" sid="6497043370870664" type="henCage">
                                                                    <param id="0" name="State">0</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <comment>닭장에 자리가 없다면 없다는 메세지.</comment>
                                                        <event-block sid="9645100964915908">
                                                            <conditions>
                                                                <condition id="-22" name="Else" sid="7675601882584457" type="System" />
                                                            </conditions>
                                                            <actions>
                                                                <action id="-16" name="Wait" sid="2560135913929656" type="System">
                                                                    <param id="0" name="Seconds">1</param>
                                                                </action>
                                                                <action id="-3" name="Create object" sid="5495972575110369" type="System">
                                                                    <param id="0" name="Object to create">turnText</param>
                                                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                                                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2+50</param>
                                                                </action>
                                                                <action id="3" name="Set font size" sid="998522883349805" type="turnText">
                                                                    <param id="0" name="Size (pt)">25</param>
                                                                </action>
                                                                <action id="0" name="Set text" sid="7464583469558921" type="turnText">
                                                                    <param id="0" name="Text">&quot;닭장이 꽉 차서 보상은 받지 못해요...&quot;</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="4402114416802641">
                                            <conditions />
                                            <actions>
                                                <action id="-16" name="Wait" sid="6130925871506581" type="System">
                                                    <param id="0" name="Seconds">5</param>
                                                </action>
                                                <action id="-2" name="Go to layout" sid="1852402519972384" type="System">
                                                    <param id="0" name="Layout">stageView</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>한턴더</comment>
                        <event-block sid="973660420540721">
                            <conditions>
                                <condition id="-22" name="Else" sid="6788834157684431" type="System" />
                            </conditions>
                            <actions>
                                <action id="-16" name="Wait" sid="6736343871967044" type="System">
                                    <param id="0" name="Seconds">1.0</param>
                                </action>
                                <action id="0" name="Call function" sid="2011705474175713" type="Function">
                                    <param id="0" name="Name">&quot;battleViewTurnOver&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="609410503592765">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="3824212703296889" type="System">
                                            <param id="0" name="Variable">gameState</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">4</param>
                                        </condition>
                                        <condition id="-14" name="Compare variable" sid="7644586068022757" type="System">
                                            <param id="0" name="Variable">gameState</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">5</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-41" name="Wait for signal" sid="915551388921825" type="System">
                                            <param id="0" name="Tag">&quot;golemMovingComplete&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" sid="7794742806693772" type="System">
                                            <param id="0" name="Seconds">1.0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="9235542984322606" type="System">
                                            <param id="0" name="Variable">gameState</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-10" name="Add to" sid="5850089500465408" type="System">
                                            <param id="0" name="Variable">turnCount</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <comment>state4는 여기 두고, state5는 gameState3에 포함.</comment>
        <event-block sid="7427033876980339">
            <conditions>
                <condition id="-14" name="Compare variable" sid="9783339009374956" type="System">
                    <param id="0" name="Variable">gameState</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">4</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="8232499183885275">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="7139803364535633" type="System" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="9532840059507622">
                            <conditions>
                                <condition id="-11" name="For Each" sid="2052628398147445" type="System">
                                    <param id="0" name="Object">golem</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="1983187770001269" type="Function">
                                    <param id="0" name="Name">&quot;golemMovesToXY&quot;</param>
                                    <param id="1" name="Parameter {n}">golem.UID{###}-1000{###}golem.Y</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="825006764932611">
                            <conditions />
                            <actions>
                                <action id="-13" name="Set time scale" sid="8920674856328456" type="System">
                                    <param id="0" name="Time scale">1</param>
                                </action>
                                <action id="0" name="Call function" sid="5960196682011499" type="Function">
                                    <param id="0" name="Name">&quot;loseHeart&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="6" name="Stop" sid="7171991829252785" type="Audio">
                                    <param id="0" name="Tag">&quot;bgm&quot;</param>
                                </action>
                                <action id="0" name="Play" sid="3578928752502844" type="Audio">
                                    <param id="0" name="Audio file">battleLose</param>
                                    <param id="2" name="Loop">0</param>
                                    <param id="3" name="Volume">float(WebStorage.LocalValue(&quot;sfx&quot;))</param>
                                    <param id="1" name="Tag (optional)">&quot;&quot;</param>
                                </action>
                                <action id="-9" name="Destroy" sid="7687311389035968" type="turnText" />
                                <action id="-3" name="Create object" sid="9300152071853948" type="System">
                                    <param id="0" name="Object to create">turnText</param>
                                    <param id="1" name="Layer">&quot;hud&quot;</param>
                                    <param id="2" name="X">(ViewportLeft(&quot;hud&quot;)+ViewportRight(&quot;hud&quot;))/2</param>
                                    <param id="3" name="Y">(ViewportTop(&quot;hud&quot;)+ViewportBottom(&quot;hud&quot;))/2</param>
                                </action>
                                <action behavior="Fade" id="3" name="Set wait time" sid="5695767622246263" type="turnText">
                                    <param id="0" name="Wait time">4</param>
                                </action>
                                <action id="0" name="Set text" sid="9025137062099726" type="turnText">
                                    <param id="0" name="Text">&quot;망했어요!&quot;</param>
                                </action>
                                <action id="-16" name="Wait" sid="3247790413369558" type="System">
                                    <param id="0" name="Seconds">5</param>
                                </action>
                                <action id="-2" name="Go to layout" sid="4788577622756026" type="System">
                                    <param id="0" name="Layout">stageView</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-group description="golem =&gt; frame 0 : idle / 1 : moving(rolling) / 그 외 다른 모션 있는 골렘은 주의. 맨 끝에다 둡시다." sid="9464684361467692" title="golem Ani">
            <sub-events>
                <comment>움직이는 골렘 hpbar횡이동</comment>
                <event-block sid="3585931961983332">
                    <conditions>
                        <condition id="-11" name="For Each" sid="71906408587429" type="System">
                            <param id="0" name="Object">golem</param>
                        </condition>
                        <condition behavior="MoveTo" id="3" name="Is moving" sid="5306592338695836" type="golem" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9037717334189647" type="Function">
                            <param id="0" name="Name">&quot;golemHpBarLocateX&quot;</param>
                            <param id="1" name="Parameter {n}">golem.UID</param>
                        </action>
                    </actions>
                </event-block>
                <comment>골렘 애니메이션 돌리기</comment>
                <event-block sid="2516843951633541">
                    <conditions>
                        <condition id="3" name="Compare frame" sid="242504764429837" type="golem">
                            <param id="0" name="Comparison">0</param>
                            <param id="1" name="Number">golemIdleFrameEnd</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="5" name="Set frame" sid="5234546622167575" type="golem">
                            <param id="0" name="Frame number">golemIdleFrameStart</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7734544671038524">
                    <conditions>
                        <condition id="3" name="Compare frame" sid="8279516036311753" type="golem">
                            <param id="0" name="Comparison">0</param>
                            <param id="1" name="Number">golemMovingFrameEnd</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="5" name="Set frame" sid="3184810263286994" type="golem">
                            <param id="0" name="Frame number">golemMovingFrameStart</param>
                        </action>
                    </actions>
                </event-block>
                <comment>골렘 도착하면 frame idle로 바꾸고 rotate 끝. turnover 함수에서는 moving frame으로 바꿈. 연기도 파괴.</comment>
                <event-block sid="1286923118960888">
                    <conditions>
                        <condition behavior="MoveTo" id="0" name="On hit target position" sid="7730507768475072" type="golem" />
                    </conditions>
                    <actions>
                        <action behavior="Rotate" id="0" name="Set speed" sid="4428360980416932" type="golem">
                            <param id="0" name="Speed">0</param>
                        </action>
                        <action id="-8" name="Set angle" sid="8825851144290709" type="golem">
                            <param id="0" name="Angle">0</param>
                        </action>
                        <action id="0" name="Call function" sid="4804205072261757" type="Function">
                            <param id="0" name="Name">&quot;golemHpBarLocateX&quot;</param>
                            <param id="1" name="Parameter {n}">golem.UID</param>
                        </action>
                        <action id="5" name="Set frame" sid="5240683504942912" type="golem">
                            <param id="0" name="Frame number">golemIdleFrameStart</param>
                        </action>
                        <action id="-42" name="Signal" sid="1863631318543817" type="System">
                            <param id="0" name="Tag">&quot;golemMovingComplete&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="4169472442918057">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="9703341699306187" type="golemMovingSmoke">
                                    <param id="0" name="Instance variable">golemUID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">golem.UID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set spraying" sid="9463633371695715" type="golemMovingSmoke">
                                    <param id="0" name="State">0</param>
                                </action>
                                <action id="-16" name="Wait" sid="2134704793647351" type="System">
                                    <param id="0" name="Seconds">2</param>
                                </action>
                                <action id="-9" name="Destroy" sid="80430304545338" type="golemMovingSmoke" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>

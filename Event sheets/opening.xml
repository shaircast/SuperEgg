<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>opening</name>
    <events>
        <variable constant="0" name="timeAway" sid="8224845814145057" static="0" type="number">0</variable>
        <include>function</include>
        <event-block sid="7572007857739591">
            <conditions>
                <condition id="-2" name="On start of layout" sid="5980368405417701" type="System" />
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="7759312065561914" type="Function">
                    <param id="0" name="Name">&quot;SetGroupActive&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;OPENING INIT&quot;</param>
                </action>
                <action id="-9" name="Set value" sid="388191855247532" type="System">
                    <param id="0" name="Variable">timeAway</param>
                    <param id="1" name="Value">int(TimeAway.ElapsedTime(&quot;timeAway&quot;))</param>
                </action>
                <action id="-3" name="Set position" sid="4501017409578334" type="openingFox">
                    <param id="0" name="X">2000</param>
                    <param id="1" name="Y">440</param>
                </action>
                <action id="-3" name="Set position" sid="331241326860672" type="openingHen">
                    <param id="0" name="X">640</param>
                    <param id="1" name="Y">2000</param>
                </action>
                <action id="-3" name="Set position" sid="9892886223268476" type="openingTitle">
                    <param id="0" name="X">670</param>
                    <param id="1" name="Y">-2000</param>
                </action>
                <action id="0" name="Set text" sid="4729545664414779" type="openingText">
                    <param id="0" name="Text">&quot;화면을 터치해서 게임을 시작해 봅시닭!&quot;</param>
                </action>
                <action id="-9" name="Set value" sid="1251958595054869" type="System">
                    <param id="0" name="Variable">wallClock</param>
                    <param id="1" name="Value">int(wallclocktime)</param>
                </action>
                <action id="-16" name="Wait" sid="9895037538262008" type="System">
                    <param id="0" name="Seconds">0</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="5586964364831085">
                    <conditions>
                        <condition disabled="1" id="3" inverted="1" name="Local key exists" sid="764536671246715" type="WebStorage">
                            <param id="0" name="Key">&quot;firstExcute&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action disabled="1" id="0" name="Set local value" sid="7353560233630544" type="WebStorage">
                            <param id="0" name="Key">&quot;firstExcute&quot;</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="0" name="Call function" sid="5778462524605821" type="Function">
                            <param id="0" name="Name">&quot;userDataReset&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <comment>볼륨 최소 -60 최대 0 : on이 0, off가 -60</comment>
                <event-block sid="4743405970216497">
                    <conditions>
                        <condition id="3" inverted="1" name="Local key exists" sid="473784033701567" type="WebStorage">
                            <param id="0" name="Key">&quot;music&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set local value" sid="7143371914270855" type="WebStorage">
                            <param id="0" name="Key">&quot;music&quot;</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1340043604329025">
                    <conditions>
                        <condition id="3" inverted="1" name="Local key exists" sid="2499643745618174" type="WebStorage">
                            <param id="0" name="Key">&quot;sfx&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set local value" sid="3354103449091326" type="WebStorage">
                            <param id="0" name="Key">&quot;sfx&quot;</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7307168884376244">
                    <conditions>
                        <condition id="3" inverted="1" name="Local key exists" sid="118999128828963" type="WebStorage">
                            <param id="0" name="Key">&quot;timeLeftToCharge&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set local value" sid="9499140736511512" type="WebStorage">
                            <param id="0" name="Key">&quot;timeLeftToCharge&quot;</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2179070527283105">
                    <conditions>
                        <condition id="3" inverted="1" name="Local key exists" sid="2326829273951867" type="WebStorage">
                            <param id="0" name="Key">&quot;heart&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set local value" sid="7904241517224083" type="WebStorage">
                            <param id="0" name="Key">&quot;heart&quot;</param>
                            <param id="1" name="Value">5</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5026051870691951">
                    <conditions />
                    <actions>
                        <action id="0" name="Call function" sid="200316924085124" type="Function">
                            <param id="0" name="Name">&quot;henDBInit&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="8587865222754586" type="Function">
                            <param id="0" name="Name">&quot;stageGolemDBInit&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="1034672320744939" type="Function">
                            <param id="0" name="Name">&quot;golemDBInit&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="6505130547001485" type="Function">
                            <param id="0" name="Name">&quot;stageDBInit&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="10" name="Request fullscreen" sid="8372771980019694" type="Browser">
                            <param id="0" name="Mode">3</param>
                        </action>
                        <action id="0" name="Play" sid="3249641608266469" type="Audio">
                            <param id="0" name="Audio file">opening</param>
                            <param id="2" name="Loop">1</param>
                            <param id="3" name="Volume">float(WebStorage.LocalValue(&quot;music&quot;))</param>
                            <param id="1" name="Tag (optional)">&quot;bgm&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <variable constant="0" name="timeCalcDone" sid="1054628559002441" static="0" type="number">0</variable>
                <comment>timeCalcDone은 시간계산 필요없으면 1.</comment>
                <event-block sid="9323872709372003">
                    <conditions />
                    <actions>
                        <action id="-9" name="Set value" sid="8178055122170966" type="System">
                            <param id="0" name="Variable">timeCalcDone</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>일단 게임 종료시 저장되어 있었던 다음 하트 차는데까지 걸리는 시간과 기기 꺼져있었던 시간을 비교.&#x0D;&#x0A;꺼져있었던게 길면 빼주고 하트 1 추가.</comment>
                        <event-block sid="9505310942733913">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="2099863868476226" type="System">
                                    <param id="0" name="First value">timeAway</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">WebStorage.LocalValue(&quot;timeLeftToCharge&quot;)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="695117413607593" type="System">
                                    <param id="0" name="Variable">timeAway</param>
                                    <param id="1" name="Value">timeAway-int(WebStorage.LocalValue(&quot;timeLeftToCharge&quot;))</param>
                                </action>
                                <action id="0" name="Call function" sid="4978555364463671" type="Function">
                                    <param id="0" name="Name">&quot;addHeart&quot;</param>
                                    <param id="1" name="Parameter {n}">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>아니면 그냥 빼주고 끝</comment>
                        <event-block sid="4095668792121702">
                            <conditions>
                                <condition id="-22" name="Else" sid="354158078654395" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Set local value" sid="9581298699726738" type="WebStorage">
                                    <param id="0" name="Key">&quot;timeLeftToCharge&quot;</param>
                                    <param id="1" name="Value">int(WebStorage.LocalValue(&quot;timeLeftToCharge&quot;))-timeAway</param>
                                </action>
                                <action id="-9" name="Set value" sid="8349562028666063" type="System">
                                    <param id="0" name="Variable">timeCalcDone</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>그거 제외하고 heartchargetime과 비교해서 지난 시간만큼 하트 채워주기</comment>
                        <event-block sid="9696217667591857">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="4234737844691724" type="System">
                                    <param id="0" name="Count">5</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="7642643122606848" type="System">
                                    <param id="0" name="Variable">timeCalcDone</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="3679529257538394">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="772946266690791" type="System">
                                            <param id="0" name="First value">timeAway</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">HEARTCHARGETIME</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="5453618364211043" type="System">
                                            <param id="0" name="Variable">timeAway</param>
                                            <param id="1" name="Value">timeAway-HEARTCHARGETIME</param>
                                        </action>
                                        <action id="0" name="Call function" sid="9719303818926377" type="Function">
                                            <param id="0" name="Name">&quot;addHeart&quot;</param>
                                            <param id="1" name="Parameter {n}">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="6691197175813189">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="3254158943504552" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set local value" sid="3756471167989105" type="WebStorage">
                                            <param id="0" name="Key">&quot;timeLeftToCharge&quot;</param>
                                            <param id="1" name="Value">HEARTCHARGETIME-timeAway</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="8472095479528058" type="System">
                                            <param id="0" name="Variable">timeCalcDone</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="4704736329733838">
            <conditions>
                <condition id="-1" name="Every tick" sid="774814628154638" type="System" />
            </conditions>
            <actions />
            <sub-events>
                <variable constant="0" name="lerpRatio" sid="8352422227423254" static="0" type="number">0.05</variable>
                <variable constant="0" name="flag" sid="2734035933738806" static="1" type="number">0</variable>
                <event-block sid="3362834930066147">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="6757646763095106" type="System" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="4517474681307061" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6070352455574189">
                    <conditions />
                    <actions>
                        <action id="-1" name="Set X" sid="5080594324374514" type="openingFox">
                            <param id="0" name="X">lerp(self.X,700,lerpRatio)</param>
                        </action>
                        <action id="-16" name="Wait" sid="2205663712688645" type="System">
                            <param id="0" name="Seconds">0.6</param>
                        </action>
                        <action id="-2" name="Set Y" sid="2342075647955131" type="openingHen">
                            <param id="0" name="Y">lerp(self.Y,360,lerpRatio)</param>
                        </action>
                        <action id="-16" name="Wait" sid="5197060748013564" type="System">
                            <param id="0" name="Seconds">0.6</param>
                        </action>
                        <action id="-2" name="Set Y" sid="4814296621668229" type="openingTitle">
                            <param id="0" name="Y">lerp(self.Y,400,lerpRatio)</param>
                        </action>
                        <action id="-16" name="Wait" sid="1382324199658332" type="System">
                            <param id="0" name="Seconds">1.2</param>
                        </action>
                        <action id="-15" name="Set visible" sid="138248365503802" type="openingText">
                            <param id="0" name="Visibility">1</param>
                        </action>
                        <action id="-9" name="Set value" sid="2677123860154863" type="System">
                            <param id="0" name="Variable">flag</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="8704295055922575">
                            <conditions>
                                <condition behavior="Fade" id="0" name="On fade-out finished" sid="450640735446845" type="openingText" />
                            </conditions>
                            <actions>
                                <action behavior="Fade" id="0" name="Restart fade" sid="1239556331432751" type="openingText" />
                            </actions>
                        </event-block>
                        <event-block sid="7762532426839229">
                            <conditions>
                                <condition id="3" name="On touched object" sid="7719113871777803" type="Touch">
                                    <param id="0" name="Object">openingBg</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="2428172854397415" type="System">
                                    <param id="0" name="Variable">flag</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-16" name="Set opacity" sid="2975033464959497" type="openingText">
                                    <param id="0" name="Opacity">100</param>
                                </action>
                                <action behavior="Fade" id="2" name="Set fade-in time" sid="8287386271575777" type="openingText">
                                    <param id="0" name="Fade-in time">0</param>
                                </action>
                                <action behavior="Fade" id="3" name="Set wait time" sid="170085635832642" type="openingText">
                                    <param id="0" name="Wait time">10</param>
                                </action>
                                <action id="-16" name="Set opacity" sid="9568997556138597" type="openingText">
                                    <param id="0" name="Opacity">100</param>
                                </action>
                                <action behavior="Fade" id="0" name="Restart fade" sid="6368561510178491" type="openingText" />
                                <action id="0" name="Set text" sid="1713921543495639" type="openingText">
                                    <param id="0" name="Text">&quot;닭 꾀는 중...&quot;</param>
                                </action>
                                <action id="-16" name="Wait" sid="6640228444129158" type="System">
                                    <param id="0" name="Seconds">0.1</param>
                                </action>
                                <action id="-2" name="Go to layout" sid="5353328075164501" type="System">
                                    <param id="0" name="Layout">stageView</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
    </events>
</c2eventsheet>
